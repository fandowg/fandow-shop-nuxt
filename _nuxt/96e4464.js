(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{310:function(t,e,r){"use strict";r.r(e);r(44),r(27),r(30),r(52),r(24),r(53);var n=r(20),o=(r(25),r(60),r(35));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={beforeRouteLeave:function(t,e,r){var n=this;"order-order-done-id"===e.name&&"order-payment-id"===t.name&&r({path:"/"}),"order-order-done-id"===t.name||"order-order-done-id"===e.name||this.order.is_paid?r():this.$modal.show("dialog",{text:"您尚未付款，確定要離開嗎？",buttons:[{title:"取消",handler:function(){n.$modal.hide("dialog"),r(!1)}},{title:"確定",handler:function(){r()}}]})},data:function(){return{order:{user:{}}}},computed:c({orderId:function(){return this.$route.params.id},routeName:function(){return this.$route.name}},Object(o.c)("cartModule",["cart"])),created:function(){this.getOrder()},methods:c({getOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/order/").concat(this.orderId);this.$store.commit("LOADING",!0),this.$axios.get(e).then((function(e){e.data.success&&(t.order=e.data.order,null===e.data.order&&t.$bus.$emit("message:push","訂單不存在","text-danger")),t.$store.commit("LOADING",!1)}))},payOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/pay/").concat(this.orderId);this.$store.commit("LOADING",!0),this.$axios.post(e).then((function(e){e.data.success&&(t.$bus.$emit("message:push",e.data.message),t.getOrder(),t.$router.push({name:"order-order-done-id",params:{id:t.orderId}})),t.$store.commit("LOADING",!1)}))}},Object(o.b)("cartModule",["getCart"]))},l=r(19),component=Object(l.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("client-only",[r("v-dialog")],1),t._v(" "),"order-order-done-id"===t.routeName?r("div",{staticClass:"alert-box"},[t._m(0),t._v(" "),r("p",[t._v("\n      親愛的顧客您好，您已付款成功，商品將於 2 日內送達，若喜歡我們的商品，歡迎關注我們的最新消息喔。\n    ")])]):t._e(),t._v(" "),r("h2",{staticClass:"page__title--sm"},[t._v("\n    商品明細\n  ")]),t._v(" "),r("div",{staticClass:"cart no-delete"},[t._m(1),t._v(" "),r("div",{staticClass:"cart__list"},t._l(t.order.products,(function(e,n){return r("div",{key:n,staticClass:"cart__row bag-row no-gutters"},[r("div",{staticClass:"cart__item bag-3 bag-md-2 cart__img"},[r("img",{attrs:{src:e.product.imageUrl,alt:"item.product.title"}})]),t._v(" "),r("div",{staticClass:"bag-7 bag-md-8 bag-row no-gutters cart__group"},[r("div",{staticClass:"cart__item cart__title bag-md-8"},[t._v("\n            "+t._s(e.product.title)+"\n          ")]),t._v(" "),r("div",{staticClass:"cart__item cart__num bag-md-4"},[r("span",{staticClass:"cart__num__content no-padding"},[t._v(t._s(e.qty)+t._s(e.product.unit))])])]),t._v(" "),r("div",{staticClass:"bag cart__item cart__price"},[t._v("\n          "+t._s(t._f("currency")(e.final_total))+"\n        ")])])})),0),t._v(" "),r("div",{staticClass:"cart__bottom"},[r("div",{staticClass:"cart__total"},[r("div",{staticClass:"cart__total__row"},[r("span",{staticClass:"cart__total__row__title"},[t._v("總額：")]),t._v(" "),r("span",{staticClass:"cart__total__row__content text-danger"},[t._v("\n            "+t._s(t._f("currency")(t.order.total))+"\n          ")])])])])]),t._v(" "),r("h2",{staticClass:"page__title--sm"},[t._v("\n    訂購人資訊\n  ")]),t._v(" "),r("div",{staticClass:"order-detail"},[r("div",{staticClass:"order-detail__row"},[r("div",{staticClass:"order-detail__title"},[t._v("\n        姓名\n      ")]),t._v(" "),r("div",{staticClass:"order-detail__content"},[t._v("\n        "+t._s(t.order.user.name)+"\n      ")])]),t._v(" "),r("div",{staticClass:"order-detail__row"},[r("div",{staticClass:"order-detail__title"},[t._v("\n        手機\n      ")]),t._v(" "),r("div",{staticClass:"order-detail__content"},[t._v("\n        "+t._s(t.order.user.tel)+"\n      ")])]),t._v(" "),r("div",{staticClass:"order-detail__row"},[r("div",{staticClass:"order-detail__title"},[t._v("\n        email\n      ")]),t._v(" "),r("div",{staticClass:"order-detail__content"},[t._v("\n        "+t._s(t.order.user.email)+"\n      ")])]),t._v(" "),r("div",{staticClass:"order-detail__row"},[r("div",{staticClass:"order-detail__title"},[t._v("\n        收件人地址\n      ")]),t._v(" "),r("div",{staticClass:"order-detail__content"},[t._v("\n        "+t._s(t.order.user.address)+"\n      ")])]),t._v(" "),r("div",{staticClass:"order-detail__row"},[r("div",{staticClass:"order-detail__title"},[t._v("\n        備註\n      ")]),t._v(" "),r("div",{staticClass:"order-detail__content"},[t._v("\n        "+t._s(t.order.message)+"\n      ")])]),t._v(" "),r("div",{staticClass:"order-detail__row"},[r("div",{staticClass:"order-detail__title"},[t._v("\n        付款狀態\n      ")]),t._v(" "),r("div",{staticClass:"order-detail__content"},[t.order.is_paid?r("span",{staticClass:"text-success"},[t._v("已付款")]):r("span",{staticClass:"text-danger"},[t._v("未付款")])])])]),t._v(" "),r("div",{staticClass:"btn-wrapper-side"},["order-payment-id"===t.routeName?r("button",{staticClass:"btn btn-primary",on:{click:t.payOrder}},[t._v("\n      確認付款\n    ")]):t._e(),t._v(" "),"order-order-done-id"===t.routeName?r("nuxt-link",{staticClass:"btn btn-primary",attrs:{to:"/product-list"}},[t._v("\n      繼續逛逛\n    ")]):t._e()],1)],1)}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("h1",{staticClass:"page__title"},[r("i",{staticClass:"far fa-check-circle"}),t._v("感謝你的購買\n    ")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart__head bag-row no-gutters"},[r("div",{staticClass:"cart__item"},[t._v("\n        產品\n      ")]),t._v(" "),r("div",{staticClass:"cart__item"},[t._v("\n        數量\n      ")]),t._v(" "),r("div",{staticClass:"cart__item"},[t._v("\n        價格\n      ")])])}],!1,null,null,null);e.default=component.exports}}]);