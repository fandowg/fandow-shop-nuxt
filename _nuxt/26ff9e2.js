(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{306:function(t,c,r){"use strict";r.r(c);r(44),r(27),r(30),r(52),r(24),r(53);var n=r(20),e=(r(60),r(35));function o(object,t){var c=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),c.push.apply(c,r)}return c}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(c){Object(n.a)(t,c,source[c])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(source,c))}))}return t}var l={beforeRouteLeave:function(t,c,r){var n=this;"/order/order-info"!==t.path&&0!==this.cart.carts.length?this.$modal.show("dialog",{text:"購物車中還有".concat(this.cart.carts.length,"筆資料，確定要離開嗎？"),buttons:[{title:"取消",handler:function(){n.$modal.hide("dialog"),r(!1)}},{title:"確定",handler:function(){r()}}]}):r()},data:function(){return{coupon:"",errorMessage:"",couponSuccess:!0,maxQty:10}},head:function(){return{title:"購物車 | CAMELBAK水瓶",meta:[{hid:"og:title",property:"og:title",content:"購物車 | CAMELBAK水瓶"}]}},computed:_({},Object(e.c)("cartModule",["cart"])),created:function(){},methods:_({checkCoupon:function(){var t=this,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/coupon");this.$store.commit("LOADING",!0),this.$axios.post(c,{data:{code:this.coupon}}).then((function(c){c.data.success?(t.couponSuccess=!0,t.getCart()):(t.couponSuccess=!1,t.errorMessage=c.data.message),t.$store.commit("LOADING",!1)}))},addToCart:function(t,c){this.$store.dispatch("cartModule/addToCart",{id:t,qty:c})}},Object(e.b)("cartModule",["getCart","deleteCart"]))},d=r(19),component=Object(d.a)(l,(function(){var t=this,c=t.$createElement,r=t._self._c||c;return r("main",{staticClass:"page page--pt container-lg"},[r("client-only",[r("v-dialog")],1),t._v(" "),r("h1",{staticClass:"page__title"},[t._v("\n    購物車清單\n  ")]),t._v(" "),r("client-only",[0===t.cart.carts.length?r("div",[r("p",[t._v("您的購物車還沒有任何內容，趕快來挑選你喜歡的水瓶吧")]),t._v(" "),r("nuxt-link",{staticClass:"btn btn-primary",attrs:{to:"/product-list"}},[t._v("\n        前往購物\n      ")])],1):r("div",[r("div",{staticClass:"cart"},[r("div",{staticClass:"cart__head bag-row no-gutters"},[r("div",{staticClass:"cart__item"},[t._v("\n            產品\n          ")]),t._v(" "),r("div",{staticClass:"cart__item"},[t._v("\n            數量\n          ")]),t._v(" "),r("div",{staticClass:"cart__item"},[t._v("\n            價格\n          ")])]),t._v(" "),r("div",{staticClass:"cart__list"},t._l(t.cart.carts,(function(c){return r("div",{key:c.id,staticClass:"cart__row bag-row no-gutters"},[r("div",{staticClass:"cart__item bag-md-2 bag-3 cart__img"},[r("img",{attrs:{src:c.product.imageUrl,alt:c.product.title}})]),t._v(" "),r("div",{staticClass:"bag-7 bag-md-8 bag-row no-gutters cart__group"},[r("div",{staticClass:"cart__item cart__title bag-md-8"},[t._v("\n                "+t._s(c.product.title)),r("br"),t._v(" "),c.coupon?r("span",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),t._v(" "),r("div",{staticClass:"cart__item cart__num bag-md-4"},[r("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(r){return t.addToCart(c.product_id,-1)}}},[t._v("\n                  -\n                ")]),t._v(" "),r("span",{staticClass:"cart__num__content"},[t._v(t._s(c.qty))]),t._v(" "),r("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{disabled:c.qty>=t.maxQty},on:{click:function(r){return t.addToCart(c.product_id,1)}}},[t._v("\n                  +\n                ")])])]),t._v(" "),r("div",{staticClass:"bag bag-row no-gutters cart__group"},[r("div",{staticClass:"cart__item bag-md-9 cart__price"},[t._v("\n                "+t._s(t._f("currency")(c.final_total))+"\n              ")]),t._v(" "),r("div",{staticClass:"cart__item bag-md-3 cart__delete"},[r("button",{staticClass:"button-none",on:{click:function(r){return t.deleteCart(c.id)}}},[r("i",{staticClass:"fas fa-trash"})])])])])})),0),t._v(" "),r("div",{staticClass:"cart__bottom"},[r("div",{staticClass:"coupon"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon,expression:"coupon"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon},on:{input:function(c){c.target.composing||(t.coupon=c.target.value)}}}),t._v(" "),r("button",{staticClass:"btn btn-outline-primary",on:{click:t.checkCoupon}},[t._v("\n                套用\n              ")])]),t._v(" "),t.couponSuccess?t._e():r("span",{staticClass:"text-danger-message"},[t._v("\n              "+t._s(t.errorMessage))])]),t._v(" "),r("div",{staticClass:"cart__total"},[t.cart.total!==t.cart.final_total?r("div",{staticClass:"cart__total__row"},[r("span",{staticClass:"cart__total__row__title"},[t._v("總額：")]),t._v(" "),r("span",{staticClass:"cart__total__row__content"},[t._v("\n                "+t._s(t._f("currency")(t.cart.total)))])]):t._e(),t._v(" "),t.cart.total!==t.cart.final_total?r("div",{staticClass:"cart__total__row"},[r("span",{staticClass:"cart__total__row__title"},[t._v("折扣：")]),t._v(" "),r("span",{staticClass:"cart__total__row__content text-success"},[t._v("\n                "+t._s(t._f("currency")(t.cart.total-t.cart.final_total))+"\n              ")])]):t._e(),t._v(" "),r("div",{staticClass:"cart__total__row"},[r("span",{staticClass:"cart__total__row__title"},[t._v("應付：")]),t._v(" "),r("span",{staticClass:"cart__total__row__content text-danger"},[t._v("\n                "+t._s(t._f("currency")(t.cart.final_total))+"\n              ")])])])])]),t._v(" "),r("div",{staticClass:"btn-wrapper-side delete-spacer"},[r("nuxt-link",{staticClass:"btn btn-outline-primary",attrs:{to:"/product-list/all"}},[t._v("\n          繼續購物\n        ")]),t._v(" "),r("nuxt-link",{staticClass:"btn btn-primary",attrs:{to:"/order/order-info"}},[t._v("\n          確認送出\n        ")])],1)])])],1)}),[],!1,null,null,null);c.default=component.exports}}]);