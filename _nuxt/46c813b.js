(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{278:function(e){e.exports=JSON.parse('["straw","sport","kid","stainless-steel"]')},282:function(e,t,r){"use strict";r.r(t);r(44),r(27),r(30),r(52),r(24),r(53);var o=r(20),n=(r(60),r(278));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var d={props:["isNew","tempProduct"],data:function(){return{category:n,loadStatus:{upLoadImage:!1},editTemp:{}}},watch:{tempProduct:function(){this.editTemp=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.tempProduct),this.isNew&&(this.editTemp.category=null)}},methods:{updateProduct:function(){var e=this;if(this.isNew){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/admin/product");this.$store.commit("LOADING",!0),this.$axios.post(t,{data:this.editTemp}).then((function(t){t.data.success&&(e.$bus.$emit("message:push",t.data.message),e.$emit("get-products")),e.$emit("close"),e.$store.commit("LOADING",!1)}))}else{if(JSON.stringify(this.editTemp)===JSON.stringify(this.tempProduct))return void this.$emit("close");var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/admin/product/").concat(this.editTemp.id);this.$store.commit("LOADING",!0),this.$axios.put(r,{data:this.editTemp}).then((function(t){t.data.success&&(e.$bus.$emit("message:push",t.data.message),e.$emit("get-products")),e.$emit("close"),e.$store.commit("LOADING",!1)}))}},upLoadImage:function(){var e=this,image=this.$refs.upImage.files[0],t=new FormData;t.append("file-to-upload",image);var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/admin/upload");this.loadStatus.upLoadImage=!0,this.$axios.post(r,t,{headers:{"Content-type":"multipart/form-data"}}).then((function(t){t.data.success?e.$set(e.editTemp,"imageUrl",t.data.imageUrl):e.$bus.$emit("message:push",t.data.message,"text-danger"),e.loadStatus.upLoadImage=!1}))}}},l=r(19),component=Object(l.a)(d,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("modal",{attrs:{name:"editProduct",adaptive:!0,"shift-y":.3,"max-width":800,width:"95%",height:"auto",scrollable:!0}},[o("div",{staticClass:"edit-page"},[o("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit;return[o("button",{staticClass:"close-position button-none",on:{click:function(t){return e.$emit("close")}}},[o("img",{attrs:{src:r(133)}})]),e._v(" "),o("h2",{staticClass:"edit-page__title"},[e.isNew?o("span",[e._v("新增")]):o("span",[e._v("編輯")]),e._v("產品\n      ")]),e._v(" "),o("div",{staticClass:"edit"},[o("div",{staticClass:"edit__item form-group"},[o("label",[e._v("輸入圖片網址")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.editTemp.imageUrl,expression:"editTemp.imageUrl"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.editTemp.imageUrl},on:{input:function(t){t.target.composing||e.$set(e.editTemp,"imageUrl",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"edit__row form-row"},[o("div",{staticClass:"edit__item bag-md-9 form-group"},[o("label",{staticStyle:{"margin-right":"1rem"}},[e._v("或上傳圖片\n              "),e.loadStatus.upLoadImage?o("i",{staticClass:"fas fa-circle-notch fa-spin"}):e._e()]),e._v(" "),o("input",{ref:"upImage",attrs:{type:"file"},on:{change:e.upLoadImage}})]),e._v(" "),e.editTemp.imageUrl?o("div",{staticClass:"edit__item bag-md-3 bag-6 form-group"},[o("img",{attrs:{src:e.editTemp.imageUrl,alt:""}})]):e._e()]),e._v(" "),o("div",{staticClass:"edit__item form-group"},[o("ValidationProvider",{attrs:{name:"產品名稱",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.failed,n=t.errors;return[o("label",{attrs:{for:"title"}},[e._v("產品名稱")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.editTemp.title,expression:"editTemp.title"}],staticClass:"form-control",attrs:{id:"title",type:"text",placeholder:"請輸入產品名稱"},domProps:{value:e.editTemp.title},on:{input:function(t){t.target.composing||e.$set(e.editTemp,"title",t.target.value)}}}),e._v(" "),r?o("span",{staticClass:"text-danger"},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1),e._v(" "),o("div",{staticClass:"edit__row form-row"},[o("div",{staticClass:"edit__item bag-6 form-group"},[o("ValidationProvider",{attrs:{name:"分類",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.failed,n=t.errors;return[o("label",{attrs:{for:"category"}},[e._v("分類")]),e._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:e.editTemp.category,expression:"editTemp.category"}],staticClass:"form-control",attrs:{id:"category",name:"category"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.editTemp,"category",t.target.multiple?r:r[0])}}},[o("option",{attrs:{disabled:"",value:"null"}},[e._v("\n                  請選擇\n                ")]),e._v(" "),e._l(e.category,(function(t){return o("option",{key:t,domProps:{value:t}},[e._v("\n                  "+e._s(e._f("categoryChangeCn")(t))+"\n                ")])}))],2),e._v(" "),r?o("span",{staticClass:"text-danger"},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1),e._v(" "),o("div",{staticClass:"edit__item bag-6 form-group"},[o("ValidationProvider",{attrs:{name:"單位",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.failed,n=t.errors;return[o("label",{attrs:{for:"unit"}},[e._v("單位")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.editTemp.unit,expression:"editTemp.unit"}],staticClass:"form-control",attrs:{id:"unit",type:"text",placeholder:"請輸入單位"},domProps:{value:e.editTemp.unit},on:{input:function(t){t.target.composing||e.$set(e.editTemp,"unit",t.target.value)}}}),e._v(" "),r?o("span",{staticClass:"text-danger"},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1)]),e._v(" "),o("div",{staticClass:"edit__row form-row"},[o("div",{staticClass:"edit__item bag-6 form-group"},[o("ValidationProvider",{attrs:{name:"原價",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.failed,n=t.errors;return[o("label",{attrs:{for:"origin_price"}},[e._v("原價")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.editTemp.origin_price,expression:"editTemp.origin_price"}],staticClass:"form-control",attrs:{id:"origin_price",type:"number",placeholder:"請輸入原價"},domProps:{value:e.editTemp.origin_price},on:{input:function(t){t.target.composing||e.$set(e.editTemp,"origin_price",t.target.value)}}}),e._v(" "),r?o("span",{staticClass:"text-danger"},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1),e._v(" "),o("div",{staticClass:"edit__item bag-6 form-group"},[o("label",{attrs:{for:"price"}},[e._v("售價")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.editTemp.price,expression:"editTemp.price"}],staticClass:"form-control",attrs:{id:"price",type:"number",placeholder:"請輸入售價"},domProps:{value:e.editTemp.price},on:{input:function(t){t.target.composing||e.$set(e.editTemp,"price",t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"edit__row form-row"},[o("div",{staticClass:"edit__item bag-md-6 form-group"},[o("label",{attrs:{for:"description"}},[e._v("產品描述")]),e._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editTemp.description,expression:"editTemp.description"}],staticClass:"form-control",attrs:{id:"description",cols:"30",rows:"6",placeholder:"請輸入產品描述"},domProps:{value:e.editTemp.description},on:{input:function(t){t.target.composing||e.$set(e.editTemp,"description",t.target.value)}}})]),e._v(" "),o("div",{staticClass:"edit__item bag-md-6 form-group"},[o("label",{attrs:{for:"content"}},[e._v("說明內容")]),e._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editTemp.content,expression:"editTemp.content"}],staticClass:"form-control",attrs:{id:"content",cols:"30",rows:"6",placeholder:"請輸入說明內容"},domProps:{value:e.editTemp.content},on:{input:function(t){t.target.composing||e.$set(e.editTemp,"content",t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"edit__row form-row"},[o("div",{staticClass:"edit__item bag-6 form-group"},[o("div",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.editTemp.is_enabled,expression:"editTemp.is_enabled"}],staticClass:"form-check-input",attrs:{id:"is_enabled",type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.editTemp.is_enabled)?e._i(e.editTemp.is_enabled,null)>-1:e._q(e.editTemp.is_enabled,1)},on:{change:function(t){var r=e.editTemp.is_enabled,o=t.target,n=o.checked?1:0;if(Array.isArray(r)){var c=e._i(r,null);o.checked?c<0&&e.$set(e.editTemp,"is_enabled",r.concat([null])):c>-1&&e.$set(e.editTemp,"is_enabled",r.slice(0,c).concat(r.slice(c+1)))}else e.$set(e.editTemp,"is_enabled",n)}}}),e._v(" "),o("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[e._v("是否啟用")])])]),e._v(" "),o("div",{staticClass:"edit__item bag-6 form-group"},[o("div",{staticClass:"form-check"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.editTemp.hotProducts,expression:"editTemp.hotProducts"}],staticClass:"form-check-input",attrs:{id:"hotProducts",type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.editTemp.hotProducts)?e._i(e.editTemp.hotProducts,null)>-1:e._q(e.editTemp.hotProducts,1)},on:{change:function(t){var r=e.editTemp.hotProducts,o=t.target,n=o.checked?1:0;if(Array.isArray(r)){var c=e._i(r,null);o.checked?c<0&&e.$set(e.editTemp,"hotProducts",r.concat([null])):c>-1&&e.$set(e.editTemp,"hotProducts",r.slice(0,c).concat(r.slice(c+1)))}else e.$set(e.editTemp,"hotProducts",n)}}}),e._v(" "),o("label",{staticClass:"form-check-label",attrs:{for:"hotProducts"}},[e._v("是否熱銷")])])])]),e._v(" "),o("div",{staticClass:"btn-wrapper-side"},[o("button",{staticClass:"btn btn-outline-primary",on:{click:function(t){return e.$emit("close")}}},[e._v("\n            取消\n          ")]),e._v(" "),o("button",{staticClass:"btn btn-primary",on:{click:function(t){return n(e.updateProduct)}}},[e._v("\n            送出\n          ")])])])]}}])})],1)])}),[],!1,null,null,null);t.default=component.exports}}]);